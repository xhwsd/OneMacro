<Ui
	xmlns="http://www.blizzard.com/wow/ui/"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\FrameXML\UI.xsd">

	<!--
	提示框
	对象 https://warcraft.wiki.gg/wiki/UIOBJECT_GameTooltip?oldid=3881048
	-->
	<GameTooltip name="OneMacroTooltip" inherits="GameTooltipTemplate" parent="UIParent" hidden="true" />

	<!-- 框架模版1 -->
	<Frame name="OneMacroFrameTemplate1" virtual="true">
		<Layers>
			<Layer level="ARTWORK">
				<FontString name="$parentMark" inherits="GameFontNormal" hidden="true">
					<Anchors>
						<Anchor point="TOPRIGHT" />
					</Anchors>
				</FontString>
				<Texture name="$parentArea" hidden="true">
					<Color r="0.2" g="0.5" b="0.8" a="0.8" />
				</Texture>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad>
				-- 置标记
				-- getglobal(this:GetName() .. "Mark"):SetText(this:GetName())
				-- getglobal(this:GetName() .. "Mark"):Show()

				-- 置区域
				-- getglobal(this:GetName() .. "Area"):SetVertexColor(0.2, 0.5, 0.8, 0.8)
				-- getglobal(this:GetName() .. "Area"):Show()
			</OnLoad> 
		</Scripts>
	</Frame>

	<!-- 分组框模版1：暗边框 -->
	<Frame name="OneMacroGroupBoxTemplate1" inherits="OneMacroFrameTemplate1" virtual="true">
		<Backdrop bgFile="Interface\ChatFrame\ChatFrameBackground" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
			<TileSize>
				<AbsValue val="16" />
			</TileSize>
			<EdgeSize>
				<AbsValue val="16" />
			</EdgeSize>
			<BackgroundInsets>
				<AbsInset left="3" right="3" top="5" bottom="3" />
			</BackgroundInsets>
			<Color r="0.1" g="0.1" b="0.1" a="0.5" />
			<BorderColor r="0.4" g="0.4" b="0.4" a="1" />
		</Backdrop>
	</Frame>

	<!-- 分组框模版2：亮边框 -->
	<Frame name="OneMacroGroupBoxTemplate2" virtual="true">
		<Anchors>
			<Anchor point="TOPLEFT" />
			<Anchor point="BOTTOMRIGHT" />
		</Anchors>
		<Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
			<TileSize>
				<AbsValue val="16" />
			</TileSize>
			<EdgeSize>
				<AbsValue val="16" />
			</EdgeSize>
			<BackgroundInsets>
				<AbsInset left="5" right="5" top="5" bottom="5" />
			</BackgroundInsets>
			<Color r="0.09" g="0.09" b="0.19" />
			<BorderColor r="1" g="1" b="1" />
		</Backdrop>
	</Frame>

	<!-- 标签模版1：文本在顶左 -->
	<Frame name="OneMacroLabelTemplate1" inherits="OneMacroFrameTemplate1" virtual="true">
		<Size>
			<AbsDimension x="60" y="20" />
		</Size>
		<Layers>
			<Layer level="BACKGROUND">
				<FontString name="$parentText" inherits="GameFontNormalSmall" justifyV="TOP" justifyH="LEFT" />
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad>
				-- 置文本
				-- getglobal(this:GetName() .. "Text"):SetText("标签模版1")
			</OnLoad>
		</Scripts>
	</Frame>

	<!-- 标签模版2：文本在顶右 -->
	<Frame name="OneMacroLabelTemplate2" inherits="OneMacroFrameTemplate1" virtual="true">
		<Size>
			<AbsDimension x="60" y="20" />
		</Size>
		<Layers>
			<Layer level="BACKGROUND">
				<FontString name="$parentText" inherits="GameFontNormalSmall" justifyV="TOP" justifyH="RIGHT" />
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad>
				-- 置文本
				-- getglobal(this:GetName() .. "Text"):SetText("标签模版2")
			</OnLoad>
		</Scripts>
	</Frame>

	<!-- 按钮模板1 -->
	<Button name="OneMacroButtonTemplate1" inherits="UIPanelButtonTemplate2" virtual="true">
		<Size>
			<AbsDimension x="40" y="22"/>
		</Size>
		<Scripts>
			<OnEnter>
				-- 显示提示
				if type(this.tooltip) == "string" and this.tooltip ~= "" then
					OneMacroTooltip:SetOwner(this, "ANCHOR_TOPRIGHT")
					OneMacroTooltip:ClearLines()
					OneMacroTooltip:SetText(this.tooltip)
					OneMacroTooltip:Show()
				end
			</OnEnter>
			<OnLeave>
				-- 隐藏提示
				if type(this.tooltip) == "string" and this.tooltip ~= "" then
					OneMacroTooltip:Hide()
				end
			</OnLeave>
		</Scripts>
	</Button>
	
	<!-- 编辑框模版1：单行 -->
	<EditBox name="OneMacroEditBoxTemplate1" inherits="InputBoxTemplate" autoFocus="false" virtual="true">
		<Size x="100" y="20" />
	</EditBox>

	<!-- 编辑框模版2：多行 -->
	<ScrollFrame name="OneMacroEditBoxTemplate2" inherits="UIPanelScrollFrameTemplate" virtual="true">
		<Anchors>
			<Anchor point="TOPLEFT" />
			<Anchor point="BOTTOMRIGHT" />
		</Anchors>
		<Layers>
			<Layer level="ARTWORK">
				<FontString name="$parentMark" inherits="GameFontNormal" hidden="true">
					<Anchors>
						<Anchor point="TOPRIGHT" />
					</Anchors>
				</FontString>
				<Texture name="$parentArea" hidden="true">
					<Color r="0.2" g="0.5" b="0.8" a="0.8" />
				</Texture>
			</Layer>
		</Layers>
		<ScrollChild>
			<EditBox name="$parentEditBox" multiLine="true" letters="512" autoFocus="false" hidden="false">
				<Size>
					<AbsDimension x="150" y="60" />
				</Size>
				<FontString inherits="ChatFontNormal" />
				<Scripts>
					<OnShow>
						-- 同步编辑框宽度为父级宽度
						this:SetPoint("RIGHT", this:GetParent())
					</OnShow>
					<OnTextChanged>
						-- 更新滚动子矩形
						this:GetParent():UpdateScrollChildRect()

						local scrollBar = getglobal(this:GetParent():GetName() .. "ScrollBar")
						local min, max = scrollBar:GetMinMaxValues()
						if max > 0 and this.max ~= max then
							this.max = max
							scrollBar:SetValue(max)
						end
					</OnTextChanged>
					<OnEscapePressed>
						this:ClearFocus()
					</OnEscapePressed>
				</Scripts>
			</EditBox>
		</ScrollChild>
		<Scripts>
			<OnLoad>
				ScrollFrame_OnLoad()

				-- 置标记
				-- getglobal(this:GetName() .. "Mark"):SetText(this:GetName())
				-- getglobal(this:GetName() .. "Mark"):Show()

				-- 置区域
				-- getglobal(this:GetName() .. "Area"):SetVertexColor(0.2, 0.5, 0.8, 0.8)
				-- getglobal(this:GetName() .. "Area"):Show()

				-- 置编辑框文本
				-- getglobal(this:GetName() .. "EditBox"):SetText(this:GetText())
			</OnLoad>
			<OnMouseDown>
				-- 按下滚动框架编辑框获得焦点
				getglobal(this:GetName() .. "EditBox"):SetFocus()
			</OnMouseDown>
		</Scripts>
	</ScrollFrame>

	<!-- 单选框模版1 -->
	<CheckButton name="OneMacroRadioBoxTemplate1" inherits="UIRadioButtonTemplate" checked="false" virtual="true">
	</CheckButton>

	<!-- XML/父选按钮 https://warcraft.wiki.gg/wiki/XML/CheckButton -->

	<!-- 选择框模版1：标题在右侧 -->
	<CheckButton name="OneMacroCheckBoxTemplate1" inherits="UICheckButtonTemplate" virtual="true">
		<Scripts>
			<OnLoad>
				-- 置文本
				getglobal(this:GetName() .. "Text"):SetText(this:GetText())
			</OnLoad>
		</Scripts>
	</CheckButton>

	<!-- 选择框模版2：标题在左侧 -->
	<CheckButton name="OneMacroCheckBoxTemplate2" inherits="UICheckButtonTemplate" virtual="true">		
		<Layers>
			<Layer level="ARTWORK">
				<!-- 如果名称相同，则无法调整 -->
				<FontString name="$parentTitle" inherits="GameFontNormalSmall">
					<Anchors>
						<Anchor point="RIGHT" relativePoint="LEFT">
							<Offset>
								<AbsDimension x="2" y="0" />
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad>
				-- 置文本  
				getglobal(this:GetName() .. "Title"):SetText(this:GetText())
			</OnLoad>
		</Scripts>
	</CheckButton>

	<!-- 单选组合框模版1 -->
	<Frame name="OneMacroRadioComboBoxTemplate1" inherits="UIDropDownMenuTemplate" virtual="true">
		<Layers>
			<Layer level="BACKGROUND">
				<FontString name="$parentLabel" inherits="GameFontNormalSmall">
					<Anchors>
						<Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT">
							<Offset>
								<AbsDimension x="21" y="2" />
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Scripts>
			<OnEnter>
				-- 显示提示
				if type(this.tooltip) == "string" and this.tooltip ~= "" then
					OneMacroTooltip:SetOwner(this, "ANCHOR_TOPRIGHT")
					OneMacroTooltip:ClearLines()
					OneMacroTooltip:SetText(this.tooltip)
					OneMacroTooltip:Show()
				end
			</OnEnter>
			<OnLeave>
				-- 隐藏提示
				if type(this.tooltip) == "string" and this.tooltip ~= "" then
					OneMacroTooltip:Hide()
				end
			</OnLeave>
		</Scripts>
	</Frame>

	<!-- 组合框模版1 注意：最多32个项（UIDROPDOWNMENU_MAXBUTTONS） -->
	<Frame name="OneMacroComboBoxTemplate1" inherits="UIDropDownMenuTemplate" virtual="true">
		<Size>
			<AbsDimension x="40" y="32" />
		</Size>
		<Layers>
			<Layer level="BACKGROUND">
				<FontString name="$parentLabel" inherits="GameFontNormalSmall">
					<Anchors>
						<Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT">
							<Offset>
								<AbsDimension x="21" y="2" />
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Scripts>
			<OnEnter>
				-- 显示提示
				if type(this.tooltip) == "string" and this.tooltip ~= "" then
					OneMacroTooltip:SetOwner(this, "ANCHOR_TOPRIGHT")
					OneMacroTooltip:ClearLines()
					OneMacroTooltip:SetText(this.tooltip)
					OneMacroTooltip:Show()
				end
			</OnEnter>
			<OnLeave>
				-- 隐藏提示
				if type(this.tooltip) == "string" and this.tooltip ~= "" then
					OneMacroTooltip:Hide()
				end
			</OnLeave>
		</Scripts>
	</Frame>

	<!-- 滑动条模版1 -->
	<Slider name="OneMacroSliderTemplate1" inherits="OptionsSliderTemplate" virtual="true">
	
	</Slider>
	
	<!-- 向下选择夹按钮模版1；命名要求：$parentTab编号 -->
	<Button name="OneMacroDownTabButtonTemplate1" inherits="CharacterFrameTabButtonTemplate" virtual="true">
		<Scripts>
			<OnClick>
				-- 置当前选择夹
				PanelTemplates_SetTab(this:GetParent(), this:GetID())

				-- 切换显示选择夹框架
				for index = 1, this:GetParent().numTabs do
					if index == this:GetID() then
						-- 显示当前选择夹
						getglobal(this:GetParent():GetName() .. "TabFrame" .. index):Show()
					else
						-- 隐藏其他选择夹
						getglobal(this:GetParent():GetName() .. "TabFrame" .. index):Hide()
					end
				end
			</OnClick>
			<OnEnter>
				-- 显示提示
				if type(this.tooltip) == "string" and this.tooltip ~= "" then
					OneMacroTooltip:SetOwner(this, "ANCHOR_TOPRIGHT")
					OneMacroTooltip:ClearLines()
					OneMacroTooltip:SetText(this.tooltip)
					OneMacroTooltip:Show()
				end
			</OnEnter>
			<OnLeave>
				-- 隐藏提示
				if type(this.tooltip) == "string" and this.tooltip ~= "" then
					OneMacroTooltip:Hide()
				end
			</OnLeave>
		</Scripts>
	</Button>

	<!-- 向上选择夹按钮模版1；命名要求：$parentTab编号 -->
	<Button name="OneMacroUpTabButtonTemplate1" inherits="TabButtonTemplate" virtual="true">
		<Scripts>
			<OnClick>
				-- 置当前选择夹
				PanelTemplates_SetTab(this:GetParent(), this:GetID())

				-- 切换显示选择夹框架
				for index = 1, this:GetParent().numTabs do
					if index == this:GetID() then
						-- 显示当前选择夹
						getglobal(this:GetParent():GetName() .. "TabFrame" .. index):Show()
					else
						-- 隐藏其他选择夹
						getglobal(this:GetParent():GetName() .. "TabFrame" .. index):Hide()
					end
				end
			</OnClick>
		</Scripts>
	</Button> 

	<!-- 选择夹框架模版1；命名要求：$parentTabFrame编号 -->
	<Frame name="OneMacroTabFrameTemplate1" inherits="OneMacroFrameTemplate1" hidden="true" virtual="true">
		<Anchors>
			<Anchor point="TOPLEFT" />
			<Anchor point="BOTTOMRIGHT" />
		</Anchors>
	</Frame>

	<!-- 滚动框模版1 -->
	<ScrollFrame name="OneMacroScrollBoxTemplate1" inherits="FauxScrollFrameTemplate" hidden="true" virtual="true">
		<Anchors>
			<Anchor point="TOPLEFT" />
			<Anchor point="BOTTOMRIGHT" />
		</Anchors>
		<Layers>
			<Layer level="ARTWORK">
				<FontString name="$parentMark" inherits="GameFontNormal" hidden="true">
					<Anchors>
						<Anchor point="TOPRIGHT" />
					</Anchors>
				</FontString>
				<Texture name="$parentArea" hidden="true">
					<Color r="0.2" g="0.5" b="0.8" a="0.8" />
				</Texture>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad>
				-- 滚动框架载入
				ScrollFrame_OnLoad()

				-- 置标记
				-- getglobal(this:GetName() .. "Mark"):SetText(this:GetName())
				-- getglobal(this:GetName() .. "Mark"):Show()

				-- 置区域
				-- getglobal(this:GetName() .. "Area"):SetVertexColor(0.2, 0.5, 0.8, 0.8)
				-- getglobal(this:GetName() .. "Area"):Show()

			</OnLoad>
			<OnShow>
				-- 显示标记
				if type(this.mark) == "string" and this.mark ~= "" then
					getglobal(this:GetName() .. "Mark"):SetText(this.mark)
					getglobal(this:GetName() .. "Mark"):Show()
				else
					getglobal(this:GetName() .. "Mark"):Hide()
				end

				-- 显示区域
				if type(this.area) == "table" and next(this.area) ~= nil then
					getglobal(this:GetName() .. "Area"):SetVertexColor(this.area.r, this.area.g, this.area.b, this.area.a)
					getglobal(this:GetName() .. "Area"):Show()
				elseif this.area == true then
					getglobal(this:GetName() .. "Area"):SetVertexColor(0.2, 0.5, 0.8, 0.8)
					getglobal(this:GetName() .. "Area"):Show()
				else
					getglobal(this:GetName() .. "Area"):Hide()
				end
			</OnShow>
		</Scripts>
	</ScrollFrame>
</Ui>
